<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>libc counter example</title>
  <script src="../dist/libc.js"></script>
</head>
<body>
  <script>
    var counterStore = createStore(0);

    function update(state, message) {
        if (message == 'INCREMENT')
        return state + 1;

        if (message == 'DECREMENT')
        return state - 1;

        return state;
    }

    counterStore.onAction(update);

    function view(state) {
        let store = state.store;

        return ['div', [
            ['button', { click: () => store.dispatch('INCREMENT') }, 'Increment'],
            ['button', { click: () => store.dispatch('DECREMENT') }, 'Decrement'],
            ['div', `Count: ${ store.getState() }`]
        ]];
    }

    var counter = createComponent(view).init({ store: counterStore });

    counter.mount(document.body);

    counterStore.onStateChanged(() => { debugger; counter.render() });
  </script>
</body>
</html>
